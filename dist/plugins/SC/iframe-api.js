//taken and modified from https://w.soundcloud.com/player/api.js
export default function init(e){e._SC="object"==typeof e._SC?e._SC:{},e._SC.Widget=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,r){var o,i,u,a=r(1),c=r(2),s=r(3),l=a.api,d=a.bridge,f=[],p=[],D=/^http(?:s?)/;function E(e){var t,r;for(t=0,r=p.length;t<r&&!1!==e(p[t]);t++);}function v(e){return e.contentWindow?e.contentWindow:e.contentDocument&&"parentWindow"in e.contentDocument?e.contentDocument.parentWindow:null}function _(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(e[t]);return r}function S(e,t,r){r.callbacks[e]=r.callbacks[e]||[],r.callbacks[e].push(t)}function h(e,t){var r=!0;return t.callbacks[e]=[],E((function(t){if((t.callbacks[e]||[]).length)return r=!1,!1})),r}function y(e,t,r){var o,i,u=v(r);if(!u.postMessage)return!1;o=r.getAttribute("src").split("?")[0],i=JSON.stringify({method:e,value:t}),"//"===o.substr(0,2)&&(o=window.location.protocol+o),o=o.replace(/http:\/\/(w|wt).soundcloud.com/,"https://$1.soundcloud.com"),u.postMessage(i,o)}function b(e){var t;return E((function(r){if(r.instance===e)return t=r,!1})),t}function g(e){var t;return E((function(r){if(v(r.element)===e)return t=r,!1})),t}function m(e,t){return function(r){var o,i=!!((o=r)&&o.constructor&&o.call&&o.apply),u=b(this),a=!i&&t?r:null,c=i&&!t?r:null;return c&&S(e,c,u),y(e,a,u.element),this}}function R(e,t,r){var o,i,u;for(o=0,i=t.length;o<i;o++)e[u=t[o]]=m(u,r)}function O(e,t,r){return e+"?url="+t+"&"+function(e){var t,r,o=[];for(t in e)e.hasOwnProperty(t)&&(r=e[t],o.push(t+"="+("start_track"===t?parseInt(r,10):r?"true":"false")));return o.join("&")}(r)}function w(e,t,r){var o,i,u=e.callbacks[t]||[];for(o=0,i=u.length;o<i;o++)u[o].apply(e.instance,r);(function(e){var t,r=!1;for(t in c)if(c.hasOwnProperty(t)&&c[t]===e){r=!0;break}return r}(t)||t===l.READY)&&(e.callbacks[t]=[])}function A(e){var t,r,o,i,u;try{r=JSON.parse(e.data)}catch(e){return!1}return t=g(e.source),o=r.method,i=r.value,(!t||P(e.origin)===P(t.domain))&&(t?(o===l.READY&&(t.isReady=!0,w(t,"__LATE_BINDING__"),h("__LATE_BINDING__",t)),o!==l.PLAY||t.playEventFired||(t.playEventFired=!0),o!==l.PLAY_PROGRESS||t.playEventFired||(t.playEventFired=!0,w(t,l.PLAY,[i])),u=[],void 0!==i&&u.push(i),void w(t,o,u)):(o===l.READY&&f.push(e.source),!1))}function P(e){return e.replace(D,"")}window.addEventListener?window.addEventListener("message",A,!1):window.attachEvent("onmessage",A),e.exports=u=function(e,t,r){var u;if((""===(u=e)||u&&u.charCodeAt&&u.substr)&&(e=document.getElementById(e)),!function(e){return!(!e||1!==e.nodeType||"IFRAME"!==e.nodeName.toUpperCase())}(e))throw new Error("SC.Widget function should be given either iframe element or a string specifying id attribute of iframe element.");t&&(r=r||{},e.src=O("http://wt.soundcloud.test:9200/",t,r));var a,c,s=g(v(e));return s&&s.instance?s.instance:(a=f.indexOf(v(e))>-1,c=new o(e),p.push(new i(c,e,a)),c)},u.Events=l,window.SC=window.SC||{},window.SC.Widget=u,i=function(e,t,r){this.instance=e,this.element=t,this.domain=function(e){var t,r,o,i="";for("//"===e.substr(0,2)&&(e=window.location.protocol+e),t=0,r=(o=e.split("/")).length;t<r&&t<3;t++)i+=o[t],t<2&&(i+="/");return i}(t.getAttribute("src")),this.isReady=!!r,this.callbacks={}},(o=function(){}).prototype={constructor:o,load:function(e,t){if(e){t=t||{};var r=this,o=b(this),i=o.element,u=i.src,a=u.substr(0,u.indexOf("?"));o.isReady=!1,o.playEventFired=!1,i.onload=function(){r.bind(l.READY,(function(){var e,r=o.callbacks;for(e in r)r.hasOwnProperty(e)&&e!==l.READY&&y(d.ADD_LISTENER,e,o.element);t.callback&&t.callback()}))},i.contentWindow.location.replace(O(a,e,t))}},bind:function(e,t){var r=this,o=b(this);return o&&o.element&&(e===l.READY&&o.isReady?setTimeout(t,1):o.isReady?(S(e,t,o),y(d.ADD_LISTENER,e,o.element)):S("__LATE_BINDING__",(function(){r.bind(e,t)}),o)),this},unbind:function(e){var t,r=b(this);r&&r.element&&(t=h(e,r),e!==l.READY&&t&&y(d.REMOVE_LISTENER,e,r.element))}},R(o.prototype,_(c)),R(o.prototype,_(s),!0)},function(e,t){t.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"},t.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}},function(e,t){e.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}},function(e,t){e.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}}])}
